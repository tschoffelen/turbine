<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tables - Turbine</title>
  <meta name="description" content="Type-safe entity mapping and query library for DynamoDB">
  <link rel="stylesheet" href="https://tschoffelen.github.io/turbine/style.css">
</head>
<body>
  <nav class="sidebar">
    <div class="sidebar-header">
      <a href="https://tschoffelen.github.io/turbine" class="logo">Turbine</a>
      <p class="tagline">DynamoDB made simple</p>
    </div>
    <ul class="nav-links">
      <li><a href="https://tschoffelen.github.io/turbine/quick-start">Quick Start</a></li>
      <li><a href="https://tschoffelen.github.io/turbine/tables">Tables</a></li>
      <li><a href="https://tschoffelen.github.io/turbine/entities">Entities</a></li>
      <li><a href="https://tschoffelen.github.io/turbine/crud">CRUD Operations</a></li>
      <li><a href="https://tschoffelen.github.io/turbine/querying">Querying</a></li>
      <li><a href="https://tschoffelen.github.io/turbine/typescript">TypeScript</a></li>
      <li><a href="https://tschoffelen.github.io/turbine/key-patterns">Key Patterns</a></li>
      <li><a href="https://tschoffelen.github.io/turbine/errors">Error Handling</a></li>
    </ul>
    <div class="sidebar-footer">
      <a href="https://github.com/tschoffelen/turbine" target="_blank">GitHub</a>
      <a href="https://www.npmjs.com/package/dynamodb-turbine" target="_blank">npm</a>
    </div>
  </nav>
  <main class="content">
    
<article>
  <h1>Tables</h1>
  <p>The <code>defineTable</code> function creates a table configuration that entities use to interact with DynamoDB.</p>
<h2 id="basic-usage">Basic Usage</h2>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#c678dd;">import </span><span>{ </span><span style="color:#e06c75;">defineTable </span><span>} </span><span style="color:#c678dd;">from </span><span style="color:#98c379;">&quot;dynamodb-turbine&quot;</span><span>;
</span><span>
</span><span style="color:#c678dd;">const </span><span style="color:#e06c75;">table </span><span>= </span><span style="color:#61afef;">defineTable</span><span>({
</span><span>  name: </span><span style="color:#98c379;">&quot;my-dynamodb-table&quot;</span><span>,
</span><span>  indexes: {
</span><span>    table: { hashKey: </span><span style="color:#98c379;">&quot;pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;sk&quot; </span><span>},
</span><span>  },
</span><span>});
</span></code></pre>
<h2 id="table-definition">Table Definition</h2>
<p>The <code>defineTable</code> function accepts a configuration object:</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name</code></td><td><code>string</code></td><td>Yes</td><td>The DynamoDB table name</td></tr>
<tr><td><code>indexes</code></td><td><code>object</code></td><td>Yes</td><td>Index definitions</td></tr>
<tr><td><code>documentClient</code></td><td><code>DynamoDBDocumentClient</code></td><td>No</td><td>Custom AWS SDK client</td></tr>
</tbody></table>
<h2 id="indexes">Indexes</h2>
<p>The <code>indexes</code> object defines your table's primary key and any Global Secondary Indexes (GSIs).</p>
<h3 id="primary-index">Primary Index</h3>
<p>The <code>table</code> key defines your primary key:</p>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span>indexes: {
</span><span>  table: { hashKey: </span><span style="color:#98c379;">&quot;pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;sk&quot; </span><span>},
</span><span>}
</span></code></pre>
<ul>
<li><code>hashKey</code> (required) - The partition key attribute name</li>
<li><code>rangeKey</code> (optional) - The sort key attribute name</li>
</ul>
<h3 id="global-secondary-indexes">Global Secondary Indexes</h3>
<p>Additional keys define GSIs:</p>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span>indexes: {
</span><span>  table: { hashKey: </span><span style="color:#98c379;">&quot;pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;sk&quot; </span><span>},
</span><span>  gsi1: { hashKey: </span><span style="color:#98c379;">&quot;type&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;createdAt&quot; </span><span>},
</span><span>  gsi2: { hashKey: </span><span style="color:#98c379;">&quot;email&quot; </span><span>},
</span><span>  gsi3: { hashKey: </span><span style="color:#98c379;">&quot;status&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;updatedAt&quot; </span><span>},
</span><span>}
</span></code></pre>
<blockquote>
<p>The index names (<code>gsi1</code>, <code>gsi2</code>, etc.) must match the index names in your DynamoDB table.</p>
</blockquote>
<h2 id="custom-dynamodb-client">Custom DynamoDB Client</h2>
<p>By default, Turbine creates a DynamoDB Document Client with sensible defaults:</p>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="font-style:italic;color:#5c6370;">// Default client configuration
</span><span>{
</span><span>  convertEmptyValues: </span><span style="color:#d19a66;">true</span><span>,
</span><span>  removeUndefinedValues: </span><span style="color:#d19a66;">true</span><span>,
</span><span>}
</span></code></pre>
<p>To use a custom client:</p>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#c678dd;">import </span><span>{ </span><span style="color:#e06c75;">DynamoDBClient </span><span>} </span><span style="color:#c678dd;">from </span><span style="color:#98c379;">&quot;@aws-sdk/client-dynamodb&quot;</span><span>;
</span><span style="color:#c678dd;">import </span><span>{ </span><span style="color:#e06c75;">DynamoDBDocumentClient </span><span>} </span><span style="color:#c678dd;">from </span><span style="color:#98c379;">&quot;@aws-sdk/lib-dynamodb&quot;</span><span>;
</span><span>
</span><span style="color:#c678dd;">const </span><span style="color:#e06c75;">dynamoClient </span><span>= new DynamoDBClient({
</span><span>  region: </span><span style="color:#98c379;">&quot;us-east-1&quot;</span><span>,
</span><span>  endpoint: </span><span style="color:#98c379;">&quot;http://localhost:8000&quot;</span><span>, </span><span style="font-style:italic;color:#5c6370;">// Local DynamoDB
</span><span>});
</span><span>
</span><span style="color:#c678dd;">const </span><span style="color:#e06c75;">documentClient </span><span>= </span><span style="color:#e06c75;">DynamoDBDocumentClient</span><span>.</span><span style="color:#61afef;">from</span><span>(</span><span style="color:#e06c75;">dynamoClient</span><span>, {
</span><span>  marshallOptions: {
</span><span>    convertEmptyValues: </span><span style="color:#d19a66;">true</span><span>,
</span><span>    removeUndefinedValues: </span><span style="color:#d19a66;">true</span><span>,
</span><span>  },
</span><span>});
</span><span>
</span><span style="color:#c678dd;">const </span><span style="color:#e06c75;">table </span><span>= </span><span style="color:#61afef;">defineTable</span><span>({
</span><span>  name: </span><span style="color:#98c379;">&quot;my-table&quot;</span><span>,
</span><span>  </span><span style="color:#e06c75;">documentClient</span><span>,
</span><span>  indexes: {
</span><span>    table: { hashKey: </span><span style="color:#98c379;">&quot;pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;sk&quot; </span><span>},
</span><span>  },
</span><span>});
</span></code></pre>
<h2 id="table-properties">Table Properties</h2>
<p>The returned table object has the following properties:</p>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#c678dd;">const </span><span style="color:#e06c75;">table </span><span>= </span><span style="color:#61afef;">defineTable</span><span>({ </span><span style="font-style:italic;color:#5c6370;">/* ... */ </span><span>});
</span><span>
</span><span style="color:#e06c75;">table</span><span>.</span><span style="color:#e06c75;">definition  </span><span style="font-style:italic;color:#5c6370;">// The original table definition
</span><span style="color:#e06c75;">table</span><span>.</span><span style="color:#e06c75;">client      </span><span style="font-style:italic;color:#5c6370;">// The DynamoDBDocumentClient instance
</span></code></pre>
<h2 id="common-patterns">Common Patterns</h2>
<h3 id="single-table-design">Single-Table Design</h3>
<p>For single-table design, define all your GSIs upfront:</p>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#c678dd;">const </span><span style="color:#e06c75;">table </span><span>= </span><span style="color:#61afef;">defineTable</span><span>({
</span><span>  name: </span><span style="color:#98c379;">&quot;app-data&quot;</span><span>,
</span><span>  indexes: {
</span><span>    table: { hashKey: </span><span style="color:#98c379;">&quot;pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;sk&quot; </span><span>},
</span><span>    gsi1: { hashKey: </span><span style="color:#98c379;">&quot;gsi1pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;gsi1sk&quot; </span><span>},
</span><span>    gsi2: { hashKey: </span><span style="color:#98c379;">&quot;gsi2pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;gsi2sk&quot; </span><span>},
</span><span>    gsi3: { hashKey: </span><span style="color:#98c379;">&quot;type&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;createdAt&quot; </span><span>},
</span><span>  },
</span><span>});
</span></code></pre>
<h3 id="environment-based-table-names">Environment-Based Table Names</h3>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#c678dd;">const </span><span style="color:#e06c75;">table </span><span>= </span><span style="color:#61afef;">defineTable</span><span>({
</span><span>  name: process.env.</span><span style="color:#e06c75;">DYNAMODB_TABLE_NAME</span><span>!,
</span><span>  indexes: {
</span><span>    table: { hashKey: </span><span style="color:#98c379;">&quot;pk&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;sk&quot; </span><span>},
</span><span>  },
</span><span>});
</span></code></pre>
<h3 id="multiple-tables">Multiple Tables</h3>
<p>You can define multiple tables in your application:</p>
<pre data-lang="typescript" style="background-color:#282c34;color:#abb2bf;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#c678dd;">const </span><span style="color:#e06c75;">usersTable </span><span>= </span><span style="color:#61afef;">defineTable</span><span>({
</span><span>  name: </span><span style="color:#98c379;">&quot;users&quot;</span><span>,
</span><span>  indexes: {
</span><span>    table: { hashKey: </span><span style="color:#98c379;">&quot;userId&quot; </span><span>},
</span><span>    byEmail: { hashKey: </span><span style="color:#98c379;">&quot;email&quot; </span><span>},
</span><span>  },
</span><span>});
</span><span>
</span><span style="color:#c678dd;">const </span><span style="color:#e06c75;">ordersTable </span><span>= </span><span style="color:#61afef;">defineTable</span><span>({
</span><span>  name: </span><span style="color:#98c379;">&quot;orders&quot;</span><span>,
</span><span>  indexes: {
</span><span>    table: { hashKey: </span><span style="color:#98c379;">&quot;orderId&quot; </span><span>},
</span><span>    byUser: { hashKey: </span><span style="color:#98c379;">&quot;userId&quot;</span><span>, rangeKey: </span><span style="color:#98c379;">&quot;createdAt&quot; </span><span>},
</span><span>  },
</span><span>});
</span></code></pre>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="/entities">Entities</a> - Define data models using your table</li>
<li><a href="/key-patterns">Key Patterns</a> - Learn about key design strategies</li>
</ul>

</article>

  </main>
</body>
</html>
